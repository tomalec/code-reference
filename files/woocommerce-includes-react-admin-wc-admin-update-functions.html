<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>WooCommerce Code Reference</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/favicon.png" />
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="../images/apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="../images/apple-touch-icon-114x114.png"/>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/base.css?updated=1692866948">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/template.css?updated=1692866948">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
            <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/js/all.min.js" integrity="sha256-0vuk8LXoyrmCjp1f0O300qo1M75ZQyhH9X3J6d+scmk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8KCYZ2CYMS"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8KCYZ2CYMS', {
		'content_group' : 'WooCommerce Core Code Reference',
	});
</script>
        <script src="../js/prism.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.dispatchEvent(new HashChangeEvent('hashchange'));
        });
    </script>
</head>
<body id="top">
    <header class="phpdocumentor-top-header">
    <section class="phpdocumentor-section">
        <div class="site-branding">
            <a class="site-logo" href="../index.html"><img width="180" src="../images/logo.svg" alt="WooCommerce" /></a>
        </div>
        <nav class="main-navigation">
            <ul>
                <li><a href="../hooks/hooks.html">Hooks Reference</a></li>
                <li><a href="https://docs.woocommerce.com/">Documentation</a></li>
                <li><a href="https://woocommerce.github.io/woocommerce-rest-api-docs/">REST API Docs</a></li>
                <li><a href="https://woocommerce.com/careers/?utm_source=woocommerce+core+code+reference&utm_medium=devdocs&utm_campaign=woo+careers" target="_blank">We're hiring!</a></li>
            </ul>
        </nav>
    </section>
</header>

<div class="phpdocumentor-header">
    <section class="phpdocumentor-section">
        <h1 class="phpdocumentor-title">WooCommerce Code Reference</h1>
        <section class="phpdocumentor-search">
    <label class="phpdocumentor-label">
        <span class="visually-hidden">Search (click ESC to close search results)</span>
        <input id="autoComplete" tabindex="1" type="search" class="phpdocumentor-field phpdocumentor-search__field" placeholder="Loading..." disabled />
    </label>
</section>

    </section>
</div>

    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <aside class="phpdocumentor-column -four phpdocumentor-sidebar">
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                <h3 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/default.html"><abbr title="\">Global</abbr></a></h3>
                                        <h4 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/woocommerce.html"><abbr title="\WooCommerce">WooCommerce</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="../namespaces/woocommerce-admin.html"><abbr title="\WooCommerce\Admin">Admin</abbr></a></li>
                                    </ul>
                            <h4 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/automattic.html"><abbr title="\Automattic">Automattic</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="../namespaces/automattic-woocommerce.html"><abbr title="\Automattic\WooCommerce">WooCommerce</abbr></a></li>
                                    </ul>
                        </section>

        <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Packages</h2>
                    <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WooCommerce.html"><abbr title="\WooCommerce">WooCommerce</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/WooCommerce-Classes.html"><abbr title="\WooCommerce\Classes">Classes</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Abstracts.html"><abbr title="\WooCommerce\Abstracts">Abstracts</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Admin.html"><abbr title="\WooCommerce\Admin">Admin</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Helper.html"><abbr title="\WooCommerce\Helper">Helper</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Views.html"><abbr title="\WooCommerce\Views">Views</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Templates.html"><abbr title="\WooCommerce\Templates">Templates</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Reports.html"><abbr title="\WooCommerce\Reports">Reports</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Blocks.html"><abbr title="\WooCommerce\Blocks">Blocks</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-RestApi.html"><abbr title="\WooCommerce\RestApi">RestApi</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-CLI.html"><abbr title="\WooCommerce\CLI">CLI</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-l10n.html"><abbr title="\WooCommerce\l10n">l10n</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Webhooks.html"><abbr title="\WooCommerce\Webhooks">Webhooks</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-DataStores.html"><abbr title="\WooCommerce\DataStores">DataStores</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Emails.html"><abbr title="\WooCommerce\Emails">Emails</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Export.html"><abbr title="\WooCommerce\Export">Export</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Gateways.html"><abbr title="\WooCommerce\Gateways">Gateways</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-PayPal.html"><abbr title="\WooCommerce\PayPal">PayPal</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Import.html"><abbr title="\WooCommerce\Import">Import</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Integrations.html"><abbr title="\WooCommerce\Integrations">Integrations</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Interfaces.html"><abbr title="\WooCommerce\Interfaces">Interfaces</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Interface.html"><abbr title="\WooCommerce\Interface">Interface</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-LogHandlers.html"><abbr title="\WooCommerce\LogHandlers">LogHandlers</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-PaymentTokens.html"><abbr title="\WooCommerce\PaymentTokens">PaymentTokens</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Utilities.html"><abbr title="\WooCommerce\Utilities">Utilities</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Shipping.html"><abbr title="\WooCommerce\Shipping">Shipping</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Shortcodes.html"><abbr title="\WooCommerce\Shortcodes">Shortcodes</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Tracks.html"><abbr title="\WooCommerce\Tracks">Tracks</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Traits.html"><abbr title="\WooCommerce\Traits">Traits</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Functions.html"><abbr title="\WooCommerce\Functions">Functions</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-WCCom.html"><abbr title="\WooCommerce\WCCom">WCCom</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-WCCOM.html"><abbr title="\WooCommerce\WCCOM">WCCOM</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Widgets.html"><abbr title="\WooCommerce\Widgets">Widgets</abbr></a></li>
                                    <li><a href="../packages/WooCommerce-Uninstaller.html"><abbr title="\WooCommerce\Uninstaller">Uninstaller</abbr></a></li>
                            </ul>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WoocommerceAdmin.html"><abbr title="\WoocommerceAdmin">WoocommerceAdmin</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/WoocommerceNavigation.html"><abbr title="\WoocommerceNavigation">WoocommerceNavigation</abbr></a></h3>
                                <h3 class="phpdocumentor-sidebar__root-package"><a href="../packages/Automattic.html"><abbr title="\Automattic">Automattic</abbr></a></h3>
                        <ul class="phpdocumentor-list">
                                    <li><a href="../packages/Automattic-WooCommerce.html"><abbr title="\Automattic\WooCommerce">WooCommerce</abbr></a></li>
                            </ul>
                        </section>
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/errors.html">Errors</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/markers.html">Markers</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../indices/files.html">Files</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../hooks/hooks.html">Hooks Reference</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
    </ul>

    <article class="phpdocumentor-element -file">
        <h2 class="phpdocumentor-content__title">wc-admin-update-functions.php</h2>

                

            <section class="phpdocumentor-functions">
        <h3 class="phpdocumentor-elements__header" id="functions">
            Functions
            <a href="#functions" class="headerlink"><i class="fas fa-link"></i></a>
        </h3>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_0201_order_status_index">
        wc_admin_update_0201_order_status_index()
        <a href="#function_wc_admin_update_0201_order_status_index" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.19">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">19</span>
</aside>

        <p class="phpdocumentor-summary">Update order stats `status` index length.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_0201_order_status_index</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>See: https://github.com/woocommerce/woocommerce-admin/issues/2969.</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_0230_rename_gross_total">
        wc_admin_update_0230_rename_gross_total()
        <a href="#function_wc_admin_update_0230_rename_gross_total" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.45">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">45</span>
</aside>

        <p class="phpdocumentor-summary">Rename &quot;gross_total&quot; to &quot;total_sales&quot;.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_0230_rename_gross_total</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"><p>See: https://github.com/woocommerce/woocommerce-admin/issues/3175</p>
</section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_0251_remove_unsnooze_action">
        wc_admin_update_0251_remove_unsnooze_action()
        <a href="#function_wc_admin_update_0251_remove_unsnooze_action" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.57">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">57</span>
</aside>

        <p class="phpdocumentor-summary">Remove the note unsnoozing scheduled action.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_0251_remove_unsnooze_action</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_110_remove_facebook_note">
        wc_admin_update_110_remove_facebook_note()
        <a href="#function_wc_admin_update_110_remove_facebook_note" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.65">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">65</span>
</aside>

        <p class="phpdocumentor-summary">Remove Facebook Extension note.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_110_remove_facebook_note</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_130_remove_dismiss_action_from_tracking_opt_in_note">
        wc_admin_update_130_remove_dismiss_action_from_tracking_opt_in_note()
        <a href="#function_wc_admin_update_130_remove_dismiss_action_from_tracking_opt_in_note" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.72">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">72</span>
</aside>

        <p class="phpdocumentor-summary">Remove Dismiss action from tracking opt-in admin note.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_130_remove_dismiss_action_from_tracking_opt_in_note</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_130_db_version">
        wc_admin_update_130_db_version()
        <a href="#function_wc_admin_update_130_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.82">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">82</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_130_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_140_db_version">
        wc_admin_update_140_db_version()
        <a href="#function_wc_admin_update_140_db_version" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.89">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">89</span>
</aside>

        <p class="phpdocumentor-summary">Update DB Version.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_140_db_version</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_160_remove_facebook_note">
        wc_admin_update_160_remove_facebook_note()
        <a href="#function_wc_admin_update_160_remove_facebook_note" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.96">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">96</span>
</aside>

        <p class="phpdocumentor-summary">Remove Facebook Experts note.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_160_remove_facebook_note</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_170_homescreen_layout">
        wc_admin_update_170_homescreen_layout()
        <a href="#function_wc_admin_update_170_homescreen_layout" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.103">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">103</span>
</aside>

        <p class="phpdocumentor-summary">Set &quot;two column&quot; homescreen layout as default for existing stores.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_170_homescreen_layout</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_270_delete_report_downloads">
        wc_admin_update_270_delete_report_downloads()
        <a href="#function_wc_admin_update_270_delete_report_downloads" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.110">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">110</span>
</aside>

        <p class="phpdocumentor-summary">Delete the preexisting export files.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_270_delete_report_downloads</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_271_update_task_list_options">
        wc_admin_update_271_update_task_list_options()
        <a href="#function_wc_admin_update_271_update_task_list_options" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.195">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">195</span>
</aside>

        <p class="phpdocumentor-summary">Update the old task list options.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_271_update_task_list_options</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_280_order_status">
        wc_admin_update_280_order_status()
        <a href="#function_wc_admin_update_280_order_status" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.214">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">214</span>
</aside>

        <p class="phpdocumentor-summary">Update order stats `status`.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_280_order_status</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_290_update_apperance_task_option">
        wc_admin_update_290_update_apperance_task_option()
        <a href="#function_wc_admin_update_290_update_apperance_task_option" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.229">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">229</span>
</aside>

        <p class="phpdocumentor-summary">Update the old task list options.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_290_update_apperance_task_option</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_290_delete_default_homepage_layout_option">
        wc_admin_update_290_delete_default_homepage_layout_option()
        <a href="#function_wc_admin_update_290_delete_default_homepage_layout_option" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.243">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">243</span>
</aside>

        <p class="phpdocumentor-summary">Delete the old woocommerce_default_homepage_layout option.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_290_delete_default_homepage_layout_option</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_300_update_is_read_from_last_read">
        wc_admin_update_300_update_is_read_from_last_read()
        <a href="#function_wc_admin_update_300_update_is_read_from_last_read" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.250">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">250</span>
</aside>

        <p class="phpdocumentor-summary">Use woocommerce_admin_activity_panel_inbox_last_read from the user meta to set wc_admin_notes.is_read col.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_300_update_is_read_from_last_read</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_admin_update_340_remove_is_primary_from_note_action">
        wc_admin_update_340_remove_is_primary_from_note_action()
        <a href="#function_wc_admin_update_340_remove_is_primary_from_note_action" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.275">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">275</span>
</aside>

        <p class="phpdocumentor-summary">Delete &quot;is_primary&quot; column from the wc_admin_notes table.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_admin_update_340_remove_is_primary_from_note_action</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
                    <article class="phpdocumentor-element -function - ">
    <h4 class="phpdocumentor-element__name" id="function_wc_update_670_delete_deprecated_remote_inbox_notifications_option">
        wc_update_670_delete_deprecated_remote_inbox_notifications_option()
        <a href="#function_wc_update_670_delete_deprecated_remote_inbox_notifications_option" class="headerlink"><i class="fas fa-link"></i></a>
    </h4>
    <aside class="phpdocumentor-element-found-in">
    <abbr class="phpdocumentor-element-found-in__file" title="woocommerce/includes/react-admin/wc-admin-update-functions.php"><a href="../files/woocommerce-includes-react-admin-wc-admin-update-functions.html#source-view.283">includes/react-admin/wc-admin-update-functions.php</a></abbr>
    :
    <span class="phpdocumentor-element-found-in__line">283</span>
</aside>

        <p class="phpdocumentor-summary">Delete the deprecated remote inbox notifications option since transients are now used.</p>

    <code class="phpdocumentor-code phpdocumentor-signature ">
    <span class="phpdocumentor-signature__visibility"></span>
                <span class="phpdocumentor-signature__name">wc_update_670_delete_deprecated_remote_inbox_notifications_option</span><span>(</span><span>)</span><span> : </span><span class="phpdocumentor-signature__response_type">mixed</span></code>

        <section class="phpdocumentor-description"></section>

    
    

    
</article>
            </section>

                    <h3 class="phpdocumentor-elements__header" id="source-code">
                Source code
                <a href="#source-code" class="headerlink"><i class="fas fa-link"></i></a>
            </h3>
            <pre id="source-view" tabindex="-1" class="language-php line-numbers linkable-line-numbers"><code>&lt;?php
/**
 * WooCommerce Admin Updates
 *
 * Functions for updating data, used by the background updater.
 *
 * @package WooCommerce\Admin
 */

use Automattic\WooCommerce\Admin\Features\OnboardingTasks\TaskLists;
use Automattic\WooCommerce\Admin\Notes\Notes;
use Automattic\WooCommerce\Internal\Admin\Notes\UnsecuredReportFiles;
use Automattic\WooCommerce\Admin\ReportExporter;

/**
 * Update order stats `status` index length.
 * See: https://github.com/woocommerce/woocommerce-admin/issues/2969.
 */
function wc_admin_update_0201_order_status_index() {
	global $wpdb;

	// Max DB index length. See wp_get_db_schema().
	$max_index_length = 191;

	$index = $wpdb-&gt;get_row( &quot;SHOW INDEX FROM {$wpdb-&gt;prefix}wc_order_stats WHERE key_name = &#039;status&#039;&quot; );

	if ( property_exists( $index, &#039;Sub_part&#039; ) ) {
		// The index was created with the right length. Time to bail.
		if ( $max_index_length === $index-&gt;Sub_part ) { // phpcs:ignore WordPress.NamingConventions.ValidVariableName
			return;
		}

		// We need to drop the index so it can be recreated.
		$wpdb-&gt;query( &quot;DROP INDEX `status` ON {$wpdb-&gt;prefix}wc_order_stats&quot; );
	}

	// Recreate the status index with a max length.
	$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;ALTER TABLE {$wpdb-&gt;prefix}wc_order_stats ADD INDEX status (status(%d))&quot;, $max_index_length ) );
}

/**
 * Rename &quot;gross_total&quot; to &quot;total_sales&quot;.
 * See: https://github.com/woocommerce/woocommerce-admin/issues/3175
 */
function wc_admin_update_0230_rename_gross_total() {
	global $wpdb;

	// We first need to drop the new `total_sales` column, since dbDelta() will have created it.
	$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}wc_order_stats DROP COLUMN `total_sales`&quot; );
	// Then we can rename the existing `gross_total` column.
	$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}wc_order_stats CHANGE COLUMN `gross_total` `total_sales` double DEFAULT 0 NOT NULL&quot; );
}

/**
 * Remove the note unsnoozing scheduled action.
 */
function wc_admin_update_0251_remove_unsnooze_action() {
	as_unschedule_action( Notes::UNSNOOZE_HOOK, null, &#039;wc-admin-data&#039; );
	as_unschedule_action( Notes::UNSNOOZE_HOOK, null, &#039;wc-admin-notes&#039; );
}

/**
 * Remove Facebook Extension note.
 */
function wc_admin_update_110_remove_facebook_note() {
	Notes::delete_notes_with_name( &#039;wc-admin-facebook-extension&#039; );
}

/**
 * Remove Dismiss action from tracking opt-in admin note.
 */
function wc_admin_update_130_remove_dismiss_action_from_tracking_opt_in_note() {
	global $wpdb;

	$wpdb-&gt;query( &quot;DELETE actions FROM {$wpdb-&gt;prefix}wc_admin_note_actions actions INNER JOIN {$wpdb-&gt;prefix}wc_admin_notes notes USING (note_id) WHERE actions.name = &#039;tracking-dismiss&#039; AND notes.name = &#039;wc-admin-usage-tracking-opt-in&#039;&quot; );
}

/**

 * Update DB Version.
 */
function wc_admin_update_130_db_version() {
	Installer::update_db_version( &#039;1.3.0&#039; );
}

/**
 * Update DB Version.
 */
function wc_admin_update_140_db_version() {
	Installer::update_db_version( &#039;1.4.0&#039; );
}

/**
 * Remove Facebook Experts note.
 */
function wc_admin_update_160_remove_facebook_note() {
	Notes::delete_notes_with_name( &#039;wc-admin-facebook-marketing-expert&#039; );
}

/**
 * Set &quot;two column&quot; homescreen layout as default for existing stores.
 */
function wc_admin_update_170_homescreen_layout() {
	add_option( &#039;woocommerce_default_homepage_layout&#039;, &#039;two_columns&#039;, &#039;&#039;, &#039;no&#039; );
}

/**
 * Delete the preexisting export files.
 */
function wc_admin_update_270_delete_report_downloads() {
	$upload_dir = wp_upload_dir();
	$base_dir   = trailingslashit( $upload_dir[&#039;basedir&#039;] );

	$failed_files   = array();
	$exports_status = get_option( ReportExporter::EXPORT_STATUS_OPTION, array() );
	$has_failure    = false;

	if ( ! is_array( $exports_status ) ) {
		// This is essentially the same path as files failing deletion. Handle as such.
		return;
	}

	// Delete all export files based on the status option values.
	foreach ( $exports_status as $key =&gt; $progress ) {
		list( $report_type, $export_id ) = explode( &#039;:&#039;, $key );

		if ( ! $export_id ) {
			continue;
		}

		$file   = &quot;{$base_dir}wc-{$report_type}-report-export-{$export_id}.csv&quot;;
		$header = $file . &#039;.headers&#039;;

		// phpcs:ignore
		if ( @file_exists( $file ) &amp;&amp; false === @unlink( $file ) ) {
			array_push( $failed_files, $file );
		}

		// phpcs:ignore
		if ( @file_exists( $header ) &amp;&amp; false === @unlink( $header ) ) {
			array_push( $failed_files, $header );
		}
	}

	// If the status option was missing or corrupt, there will be files left over.
	$potential_exports = glob( $base_dir . &#039;wc-*-report-export-*.csv&#039; );
	$reports_pattern   = &#039;(revenue|products|variations|orders|categories|coupons|taxes|stock|customers|downloads)&#039;;

	/**
	 * Look for files we can be reasonably sure were created by the report export.
	 *
	 * Export files we created will match the &#039;wc-*-report-export-*.csv&#039; glob, with
	 * the first wildcard being one of the exportable report slugs, and the second
	 * being an integer with 11-14 digits (from microtime()&#039;s output) that represents
	 * a time in the past.
	 */
	foreach ( $potential_exports as $potential_export ) {
		$matches = array();
		// See if the filename matches an unfiltered export pattern.
		if ( ! preg_match( &quot;/wc-{$reports_pattern}-report-export-(?P&lt;export_id&gt;\d{11,14})\.csv\$/&quot;, $potential_export, $matches ) ) {
			$has_failure = true;
			continue;
		}

		// Validate the timestamp (anything in the past).
		$timestamp = (int) substr( $matches[&#039;export_id&#039;], 0, 10 );

		if ( ! $timestamp || $timestamp &gt; time() ) {
			$has_failure = true;
			continue;
		}

		// phpcs:ignore
		if ( false === @unlink( $potential_export ) ) {
			array_push( $failed_files, $potential_export );
		}
	}

	// Try deleting failed files once more.
	foreach ( $failed_files as $failed_file ) {
		// phpcs:ignore
		if ( false === @unlink( $failed_file ) ) {
			$has_failure = true;
		}
	}

	if ( $has_failure ) {
		UnsecuredReportFiles::possibly_add_note();
	}
}

/**
 * Update the old task list options.
 */
function wc_admin_update_271_update_task_list_options() {
	$hidden_lists         = get_option( &#039;woocommerce_task_list_hidden_lists&#039;, array() );
	$setup_list_hidden    = get_option( &#039;woocommerce_task_list_hidden&#039;, &#039;no&#039; );
	$extended_list_hidden = get_option( &#039;woocommerce_extended_task_list_hidden&#039;, &#039;no&#039; );
	if ( &#039;yes&#039; === $setup_list_hidden ) {
		$hidden_lists[] = &#039;setup&#039;;
	}
	if ( &#039;yes&#039; === $extended_list_hidden ) {
		$hidden_lists[] = &#039;extended&#039;;
	}

	update_option( &#039;woocommerce_task_list_hidden_lists&#039;, array_unique( $hidden_lists ) );
	delete_option( &#039;woocommerce_task_list_hidden&#039; );
	delete_option( &#039;woocommerce_extended_task_list_hidden&#039; );
}

/**
 * Update order stats `status`.
 */
function wc_admin_update_280_order_status() {
	global $wpdb;

	$wpdb-&gt;query(
		&quot;UPDATE {$wpdb-&gt;prefix}wc_order_stats refunds
		INNER JOIN {$wpdb-&gt;prefix}wc_order_stats orders
			ON orders.order_id = refunds.parent_id
		SET refunds.status = orders.status
		WHERE refunds.parent_id != 0&quot;
	);
}

/**
 * Update the old task list options.
 */
function wc_admin_update_290_update_apperance_task_option() {
	$is_actioned = get_option( &#039;woocommerce_task_list_appearance_complete&#039;, false );

	$task = TaskLists::get_task( &#039;appearance&#039; );
	if ( $task &amp;&amp; $is_actioned ) {
		$task-&gt;mark_actioned();
	}

	delete_option( &#039;woocommerce_task_list_appearance_complete&#039; );
}

/**
 * Delete the old woocommerce_default_homepage_layout option.
 */
function wc_admin_update_290_delete_default_homepage_layout_option() {
	delete_option( &#039;woocommerce_default_homepage_layout&#039; );
}

/**
 * Use woocommerce_admin_activity_panel_inbox_last_read from the user meta to set wc_admin_notes.is_read col.
 */
function wc_admin_update_300_update_is_read_from_last_read() {
	global $wpdb;
	$meta_key = &#039;woocommerce_admin_activity_panel_inbox_last_read&#039;;
	// phpcs:ignore
	$users    = get_users( &quot;meta_key={$meta_key}&amp;orderby={$meta_key}&amp;fields=all_with_meta&amp;number=1&quot; );

	if ( count( $users ) ) {
		$last_read   = current( $users )-&gt;{$meta_key};
		$date_in_utc = gmdate( &#039;Y-m-d H:i:s&#039;, intval( $last_read ) / 1000 );
		$wpdb-&gt;query(
			$wpdb-&gt;prepare(
				&quot;
				update {$wpdb-&gt;prefix}wc_admin_notes set is_read = 1
				where
				date_created &lt;= %s&quot;,
				$date_in_utc
			)
		);
		$wpdb-&gt;query( $wpdb-&gt;prepare( &quot;delete from {$wpdb-&gt;usermeta} where meta_key=%s&quot;, $meta_key ) );
	}
}

/**
 * Delete &quot;is_primary&quot; column from the wc_admin_notes table.
 */
function wc_admin_update_340_remove_is_primary_from_note_action() {
	global $wpdb;
	$wpdb-&gt;query( &quot;ALTER TABLE {$wpdb-&gt;prefix}wc_admin_note_actions DROP COLUMN `is_primary`&quot; );
}

/**
 * Delete the deprecated remote inbox notifications option since transients are now used.
 */
function wc_update_670_delete_deprecated_remote_inbox_notifications_option() {
	delete_option( &#039;wc_remote_inbox_notifications_specs&#039; );
}</code></pre>
            </article>
            </div>
        </div>
        <a href="#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <footer class="phpdocumentor phpdocumentor-footer">
    <div class="phpdocumentor-section">
        <span>WooCommerce Code Reference API documentation generated by <a href="http://www.phpdoc.org/">phpDocumentor</a> on August 24th, 2023 at 08:49 am.</span>
    </div>
</footer>

    <script>
        cssVars({});
    </script>
    <script>
        var searchParams = {
            'searchIndex': '..\/js\/searchIndex.json'
        };
    </script>
    <script src="../js/searchIndex.js?updated=1692866948"></script>
    <script src="../js/search.js?updated=1692866948"></script>
</body>
</html>
